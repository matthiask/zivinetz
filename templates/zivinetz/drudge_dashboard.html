{% extends "zivinetz/base.html" %}

{% load i18n towel_form_tags modelview_list %}

{% block title %}{{ drudge }} - {{ block.super }}{% endblock %}

{% block content %}
<h1>{% trans "dashboard"|capfirst %}: {{ drudge }}</h1>

<h2>{% trans "Assignments" %}</h2>
<table class="objects">
    <thead>
        <tr>
            <th>{% trans "date period"|capfirst %}</th>
            <th>{% trans "specification"|capfirst %}</th>
            <th>{% trans "created"|capfirst %}</th>
            <th>{% trans "status"|capfirst %}</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
    {% for object in assignments %}
        <tr class="{% cycle 'odd' 'even' %}">
            <th>
                <a href="{{ object.get_absolute_url }}">
                    {{ object.date_from|date:"d.m.Y" }} - {{ object.date_until|date:"d.m.Y" }}
                </a>
            </th>
            <td title="{{ object.specification }}">{{ object.specification.code }}</td>
            <td>{{ object.created|date:"d.m.Y" }}</td>
            <td>{{ object.get_status_display }}</td>
            <td>{{ object.admin_pdf_url|safe }}</td>
        </tr>
    {% empty %}
        <tr>
            <td colspan="5"><strong>{% trans "No items yet." %}</strong></td>
        </tr>
    {% endfor %}
    </tbody>
</table>


<h2>{% trans "expense reports"|capfirst %}</h2>

<table class="objects">
    <thead>
        <tr>
            <th>{% trans "object"|capfirst %}</th>
            <th>{% trans "assignment"|capfirst %}</th>
            <th>{% trans "total days"|capfirst %}</th>
            <th>{% trans "status"|capfirst %}</th>
        </tr>
    </thead>
    <tbody>
    {% for object in expense_reports %}
        <tr class="{% cycle 'odd' 'even' %}">
            <th>
                <a href="{{ object.get_absolute_url }}">
                    {{ object.date_from|date:"d.m.Y" }} - {{ object.date_until|date:"d.m.Y" }}
                </a>
            </th>
            {% for name, value in object|model_row:"assignment,total_days" %}
                <td>{{ value }}</td>
            {% endfor %}
            <td>{{ object.get_status_display }}</td>
        </tr>
    {% empty %}
        <tr>
            <td colspan="4"><strong>{% trans "No items yet." %}</strong></td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}
